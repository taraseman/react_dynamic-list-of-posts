(this["webpackJsonpreact_dynamic-list-of-posts"]=this["webpackJsonpreact_dynamic-list-of-posts"]||[]).push([[0],[,,,,,,function(e,t,n){e.exports=n(17)},,,,,function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(5),s=n.n(o),r=n(1),l=(n(11),n(12),n(2)),u=n.n(l),m=n(3),i="https://mate-api.herokuapp.com",p=function(e){return fetch("".concat(i,"/posts/").concat(e)).then((function(e){return e.json()})).then((function(e){return e.data}))},f=function(e){return fetch("".concat(i,"/comments?postId=").concat(e)).then((function(e){return e.json()})).then((function(e){return e.data}))},d=(n(14),function(e){var t=e.posts,n=e.setComments,o=e.setchoosenPost,s=Object(a.useState)(""),l=Object(r.a)(s,2),i=l[0],d=l[1],E=function(){var e=Object(m.a)(u.a.mark((function e(t){var a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(t);case 2:return a=e.sent,e.next=5,p(t);case 5:c=e.sent,a=a.filter((function(e){return e.postId===t})),n(a),o(c),d(t);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){o(null),d("")};return c.a.createElement("div",{className:"PostsList"},c.a.createElement("h2",null,"Posts:"),c.a.createElement("ul",{className:"PostsList__list"},t.map((function(e){return c.a.createElement("li",{className:"PostsList__item",key:e.id},c.a.createElement("div",null,c.a.createElement("b",null,"[User #".concat(e.userId,"]: ")),e.title),i!==e.id?c.a.createElement("button",{type:"button",className:"PostsList__button button",onClick:function(){E(e.id)}},"Open"):c.a.createElement("button",{type:"button",className:"PostsList__button button",onClick:b},"Close"))}))))}),E=(n(15),function(e){var t=e.postId,n=e.commentsUpdate,o=Object(a.useState)(""),s=Object(r.a)(o,2),l=s[0],p=s[1],d=Object(a.useState)(""),E=Object(r.a)(d,2),b=E[0],h=E[1],v=Object(a.useState)(""),_=Object(r.a)(v,2),N=_[0],j=_[1],O=function(){var e=Object(m.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(t);case 2:a=e.sent,n(a);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e,n={postId:t,name:l,email:b,body:N};p(""),h(""),j(""),e=n,fetch("".concat(i,"/comments"),{method:"POST",headers:{"Context-type":"application/json;charset=UTF-8"},body:JSON.stringify(e)}),O()};return c.a.createElement("form",{className:"NewCommentForm",onSubmit:function(e){e.preventDefault(),y()}},c.a.createElement("div",{className:"form-field"},c.a.createElement("input",{required:!0,type:"text",name:"name",placeholder:"Your name",className:"NewCommentForm__input",value:l,onChange:function(e){p(e.target.value)}})),c.a.createElement("div",{className:"form-field"},c.a.createElement("input",{required:!0,type:"text",name:"email",placeholder:"Your email",className:"NewCommentForm__input",value:b,onChange:function(e){h(e.target.value)}})),c.a.createElement("div",{className:"form-field"},c.a.createElement("textarea",{required:!0,name:"body",placeholder:"Type comment here",className:"NewCommentForm__input",value:N,onChange:function(e){j(e.target.value)}})),c.a.createElement("button",{type:"submit",className:"NewCommentForm__submit-button button"},"Add a comment"))});n(16);function b(e){var t=e.post,n=e.comments,o=e.commentsUpdate,s=Object(a.useState)(!1),l=Object(r.a)(s,2),u=l[0],m=l[1],p=function(e){!function(e){fetch("".concat(i,"/comments/").concat(e),{method:"DELETE"})}(e),o((function(t){return t.filter((function(t){return t.id!==e}))}))};return c.a.createElement("div",{className:"PostDetails"},c.a.createElement("h2",null,"Post details:"),c.a.createElement("h3",null,t.title),c.a.createElement("section",{className:"PostDetails__post"},c.a.createElement("p",null,t.body),c.a.createElement("p",null,t.createdAt.slice(0,10))),c.a.createElement("section",{className:"PostDetails__comments"},c.a.createElement("button",{type:"button",className:"button",onClick:function(){m((function(e){return!e}))}},"".concat(u?"Hide":"Show"," ").concat(n.length," comments")),u&&c.a.createElement("ul",{className:"PostDetails__list"},n.map((function(e){return c.a.createElement("li",{className:"PostDetails__list-item",key:e.id},c.a.createElement("button",{type:"button",className:"PostDetails__remove-button button",onClick:function(){p(e.id)}},"X"),c.a.createElement("p",null,e.body,c.a.createElement("br",null),e.createdAt.slice(0,10)))})))),c.a.createElement("section",null,c.a.createElement("div",{className:"PostDetails__form-wrapper"},c.a.createElement(E,{postId:t.id,commentsUpdate:o}))))}b.defaultProps={comments:[]};var h=function(){var e=Object(a.useState)([]),t=Object(r.a)(e,2),n=t[0],o=t[1],s=Object(a.useState)([]),l=Object(r.a)(s,2),u=l[0],m=l[1],p=Object(a.useState)("0"),f=Object(r.a)(p,2),E=f[0],h=f[1],v=Object(a.useState)([]),_=Object(r.a)(v,2),N=_[0],j=_[1],O=Object(a.useState)(null),y=Object(r.a)(O,2),C=y[0],P=y[1];Object(a.useEffect)((function(){fetch("".concat(i,"/posts")).then((function(e){return e.json()})).then((function(e){return e.data})).then((function(e){o(e),m(e),o(e)}))}),[]),Object(a.useEffect)((function(){m(0===+E?n:n.filter((function(e){return e.userId===+E})))}),[E]);var S=Object(a.useCallback)(j,[]);return c.a.createElement("div",{className:"App"},c.a.createElement("header",{className:"App__header"},c.a.createElement("label",null,"Select a user: \xa0",c.a.createElement("select",{className:"App__user-selector",onChange:function(e){h(e.target.value)}},c.a.createElement("option",{value:"0"},"All users"),c.a.createElement("option",{value:"1"},"Leanne Graham"),c.a.createElement("option",{value:"2"},"Ervin Howell"),c.a.createElement("option",{value:"3"},"Clementine Bauch"),c.a.createElement("option",{value:"4"},"Patricia Lebsack"),c.a.createElement("option",{value:"5"},"Chelsey Dietrich"),c.a.createElement("option",{value:"6"},"Mrs. Dennis Schulist"),c.a.createElement("option",{value:"7"},"Kurtis Weissnat"),c.a.createElement("option",{value:"8"},"Nicholas Runolfsdottir V"),c.a.createElement("option",{value:"9"},"Glenna Reichert"),c.a.createElement("option",{value:"10"},"Leanne Graham")))),c.a.createElement("main",{className:"App__main"},c.a.createElement("div",{className:"App__sidebar"},c.a.createElement(d,{posts:u,setComments:j,setchoosenPost:P})),c.a.createElement("div",{className:"App__content"},C&&c.a.createElement(b,{post:C,comments:N,commentsUpdate:S}))))};s.a.render(c.a.createElement(h,null),document.getElementById("root"))}],[[6,1,2]]]);
//# sourceMappingURL=main.f7d70c44.chunk.js.map